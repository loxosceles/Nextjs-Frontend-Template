# __PROJECT_NAME__

Next.js frontend with AWS CDK infrastructure (CloudFront + S3).

## Bootstrap

From an empty directory:

```sh
curl -fsSL https://raw.githubusercontent.com/loxosceles/nextjs-frontend-template/main/setup.sh | bash
```

The directory name becomes the project name. No cloning required.

## Prerequisites

- `bash`, `curl`, `git`, `python3`
- `pnpm` — install after bootstrap: `npm install -g pnpm`

## After Bootstrap

```sh
git remote add origin git@github.com:<your-username>/__PROJECT_NAME__.git
pnpm install
code .   # → Reopen in Container
```

## Structure

```
frontend/        Next.js App Router (static export → S3)
infrastructure/  AWS CDK — CloudFront + S3 (OAC)
.devcontainer/   Generated by setup.sh
.github/         CI workflows + versioning
```

## Branch Strategy

```
feature/* → dev    lint + test on PR; CodePipeline dev on merge
dev → main         lint + test on PR; version-and-tag → CodePipeline prod on merge
```

## Key Commands

| Command | Description |
|---------|-------------|
| `pnpm dev` | Start Next.js dev server |
| `pnpm build` | Build static export |
| `pnpm lint` | Run ESLint |
| `pnpm test` | Run all tests |
| `pnpm synth` | CDK synth |
| `pnpm deploy:dev` | Deploy to dev |
| `pnpm deploy:prod` | Deploy to prod |

## Configuration

Bootstrap config (account, region, domain) lives in `infrastructure/.env.{stage}` locally
or as CI environment variables. See `infrastructure/.env_TEMPLATE`.

Runtime config (CloudFront domain, bucket name) is written to SSM Parameter Store after deploy
under `/__PROJECT_NAME__/{stage}/`.

## Versioning

PRs to `main` require a `major`, `minor`, or `patch` label. On merge, the version is bumped
in `package.json`, tagged, and the prod pipeline is triggered.

## Related

- [`@loxosceles/cdk-cli-core`](https://github.com/loxosceles/cdk-cli-core) — CLI core package (CLI commands are stubs until published)
